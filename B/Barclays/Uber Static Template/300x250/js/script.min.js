function textUpdate(){var g=ad.root.querySelectorAll(".text, .text-left, .text-right");var a=ad.root.querySelectorAll(".text.clip, .text-left.clip, .text-right.clip");if(a&&a.length){for(var d=0;d<a.length;d++){var f=a[d];var m=f.offsetHeight;var l=f.querySelector("span");if(l){if(l.offsetHeight>m){var h=l.innerHTML;var j=h.split(" ");for(var e=0;e<j.length;e++){j.pop();l.innerHTML=j.join(" ")+"...";if(l.offsetHeight<=m){break}}}}else{var c=f.style.height;f.style.height="auto";if(f.offsetHeight>m){var h=f.innerHTML;var j=h.split(" ");for(var e=0;e<j.length;e++){j.pop();f.innerHTML=j.join(" ")+"...";if(f.offsetHeight<=m){break}}}f.style.height=c}}}for(var d=0;d<g.length;d++){var f=g[d];var b=window.getComputedStyle(f,null).getPropertyValue("font-size");var n=parseInt(b);var m=f.offsetHeight;var l=f.querySelector("span");if(l){if(l.offsetHeight>m){for(var e=n-1;e>0;e--){f.style.fontSize=e+"px";if(l.offsetHeight<=m){break}}}}else{var c=f.style.height;f.style.height="auto";if(f.offsetHeight>m){for(var e=n-1;e>0;e--){f.style.fontSize=e+"px";if(f.offsetHeight<=m){break}}}f.style.height=c}}}var Ad=function(d){var b=d.width,o=d.height,m=d.root;var a="borderWidth" in d&&d.borderWidth?d.borderWidth:1;var e="borderColor" in d&&d.borderColor?d.borderColor:"#000";var h={},k={},n=[];var l=function(t,q){if(t&&typeof t=="string"){var u=t;t=[];t.push(u)}if(t&&typeof t=="object"&&t.length){var s=[];var r=document.querySelector("head");function p(v){s.push(this);if(s.length==t.length){q(s)}}t.forEach(function(y){if(y&&typeof y=="string"&&y.length){if(y.indexOf(".js")>0){var v=document.createElement("script");v.type="text/javascript";v.onload=p;v.src=y;r.appendChild(v)}else{if(y.indexOf(".css")>0){var w=document.createElement("style");w.type="text/css";w.setAttribute("rel","stylesheet");w.onload=p;w.setAttribute("href",y);r.appendChild(w)}else{var x=new Image();x.onload=p;x.src=y}}}})}};var g=function(p,r){var q=typeof p=="string"&&p&&p.length&&m.querySelector(p)?m.querySelector(p):p;if(q&&r&&r.length){q.textContent=r;while(q.clientHeight<q.scrollHeight){r=q.innerHTML.trim();if(r.split(" ").length<=1){break}q.innerHTML=r.replace(/\W*\s(\S)*$/,"...")}}};var j=function(){var t="",r=m.offsetWidth,p=m.offsetHeight;var q=a+"px solid "+e;t='<div class="ad-border-top" style="position:absolute;display:inline-block;width:'+r+"px;border-top:"+q+';top:0px;left:0px;"></div><div class="ad-border-right" style="position:absolute;display:inline-block;height:'+p+"px;border-left:"+q+";top:0px;left:"+(r-a)+'px;"></div><div class="ad-border-bottom" style="position:absolute;display:inline-block;width:'+r+"px;border-top:"+q+";top:"+(p-a)+'px;left:0px;"></div><div class="ad-border-left" style="position:absolute;display:inline-block;height:'+p+"px;border-left:"+q+';top:0px;left:0px;"></div>';var s=document.createElement("div");s.className="ad-borders";s.innerHTML=t;m.appendChild(s)};var i=function(q,p){if(q.indexOf("!{")!=-1&&q.indexOf("}")!=-1){q=q.split("!{");q=q.map(function(r){if(r.indexOf("}")!=-1){r=r.split("}");for(var s in p){if(s==r[0]){r[0]=p[s]}}r=r.join("")}return r}).join("")}return q};var f=function(){var s=m.innerHTML.replace(/(\r\n|\n|\r)/gm," ").trim();var y=s.split("  ");while(y.length>1){s=s.split("  ").join(" ").split("> <").join("><");y=s.split("  ")}var t=n[0];m.innerHTML=s;var x=m.querySelectorAll("[data-image]");if(x.length){for(var u=0;u<x.length;u++){var v=x[u];var p="style" in v.dataset?v.dataset.style:"";v.innerHTML="<img "+(p.length?'style="'+p+'"':"")+' src="'+t[v.dataset.image]+'" />';v.removeAttribute("data-image")}}var q=m.querySelectorAll("[data-text]");if(q.length){for(var u=0;u<q.length;u++){var v=q[u];var p="style" in v.dataset?v.dataset.style:"";v.innerHTML="<span "+(p.length?'style="'+p+'"':"")+">"+(v.dataset.text.indexOf("!{")==-1?(v.dataset.text in t?t[v.dataset.text]:v.dataset.text):i(v.dataset.text,t))+"</span>";v.removeAttribute("data-text")}}s=m.innerHTML;s=i(s,t);m.innerHTML=s;var w=m.querySelectorAll("[data-backgroundImage]");if(w.length){for(var u=0;u<w.length;u++){var v=w[u];v.style.backgroundImage="url("+t[v.dataset.backgroundimage]+")";v.removeAttribute("data-backgroundImage")}}textUpdate();var r=m.querySelectorAll("[id]");if(r&&r.length){for(var u=0;u<r.length;u++){var v=r[u];if(v){h[v.id]=v}}}};var c=function(s,p){var r=[];if(typeof s=="object"&&Object.keys(s).length==0&&amo&&"attributes" in amo&&Object.keys(amo.attributes).length){n.push(amo.attributes)}else{if("cam" in s&&Object.keys(s).length){for(var q in s.cam){amo.registerVariation(q,s.cam[q])}}if("feed" in s&&s.feed.length){s.feed.forEach(function(t){amo.registerContent(t)})}if("content" in amo&&amo.content&&amo.content.length){amo.content.forEach(function(u){var v=u;v.feedData=u;if("variation" in amo&&amo.variation&&Object.keys(amo.variation).length){for(var t in amo.variation){v[t]=amo.variation[t]}}if("staticData" in s&&s.staticData&&Object.keys(s.staticData).length){for(var t in s.staticData){v[t]=s.staticData[t]}}n.push(v)})}}if(n.length){n.forEach(function(u){for(var t in u){var v=u[t];if(typeof v=="string"&&v.match(/\.(bmp|jpeg|jpg|gif|png|webp)$/)!=null&&v.indexOf("/")!=-1){r.push(v)}}});if(r&&r.length){l(r,function(t){f();p(n);setTimeout(function(){h.overlay.style.opacity=0;ad.addBorder()},10);setTimeout(function(){h.overlay.style.visibility="hidden"},510)})}else{f();p(n);setTimeout(function(){h.overlay.style.opacity=0;ad.addBorder()},10);setTimeout(function(){h.overlay.style.visibility="hidden"},510)}}};return{root:m,layers:h,frames:k,width:b,height:o,loadAssets:function(q,p){return l(q,p)},setText:function(p,r,q){return g(p,r,q)},addBorder:function(){return j()},update:function(){return f()},contentSetup:function(q,p){return c(q,p)}}};